/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/poly-decomp@0.3.0/src/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var r={decomp:function(r){var n=k(r);return n.length>0?C(r,n):[r]},quickDecomp:function r(n,t,e,h,a,l,p){l=l||100,p=p||0,a=a||25,t=void 0!==t?t:[],e=e||[],h=h||[];var m=[0,0],A=[0,0],M=[0,0],k=0,C=0,q=0,D=0,x=0,P=0,y=0,E=[],L=[],N=n,U=n;if(U.length<3)return t;if(++p>l)return console.warn("quickDecomp: max level ("+l+") reached."),t;for(var V=0;V<n.length;++V)if(s(N,V)){e.push(N[V]),k=C=Number.MAX_VALUE;for(var X=0;X<n.length;++X)u(v(N,V-1),v(N,V),v(N,X))&&i(v(N,V-1),v(N,V),v(N,X-1))&&(M=b(v(N,V-1),v(N,V),v(N,X),v(N,X-1)),o(v(N,V+1),v(N,V),M)&&(q=c(N[V],M))<C&&(C=q,A=M,P=X)),u(v(N,V+1),v(N,V),v(N,X+1))&&i(v(N,V+1),v(N,V),v(N,X))&&(M=b(v(N,V+1),v(N,V),v(N,X),v(N,X+1)),u(v(N,V-1),v(N,V),M)&&(q=c(N[V],M))<k&&(k=q,m=M,x=X));if(P===(x+1)%n.length)M[0]=(A[0]+m[0])/2,M[1]=(A[1]+m[1])/2,h.push(M),V<x?(g(E,N,V,x+1),E.push(M),L.push(M),0!==P&&g(L,N,P,N.length),g(L,N,0,V+1)):(0!==V&&g(E,N,V,N.length),g(E,N,0,x+1),E.push(M),L.push(M),g(L,N,P,V+1));else{if(P>x&&(x+=n.length),D=Number.MAX_VALUE,x<P)return t;for(X=P;X<=x;++X)f(v(N,V-1),v(N,V),v(N,X))&&i(v(N,V+1),v(N,V),v(N,X))&&(q=c(v(N,V),v(N,X)))<D&&d(N,V,X)&&(D=q,y=X%n.length);V<y?(g(E,N,V,y+1),0!==y&&g(L,N,y,U.length),g(L,N,0,V+1)):(0!==V&&g(E,N,V,U.length),g(E,N,0,y+1),g(L,N,y,V+1))}return E.length<L.length?(r(E,t,e,h,a,l,p),r(L,t,e,h,a,l,p)):(r(L,t,e,h,a,l,p),r(E,t,e,h,a,l,p)),t}return t.push(n),t},isSimple:function(r){var n,e=r;for(n=0;n<e.length-1;n++)for(var u=0;u<n-1;u++)if(t(e[n],e[n+1],e[u],e[u+1]))return!1;for(n=1;n<e.length-2;n++)if(t(e[0],e[e.length-1],e[n],e[n+1]))return!1;return!0},removeCollinearPoints:function(r,n){for(var t=0,e=r.length-1;r.length>3&&e>=0;--e)l(v(r,e-1),v(r,e),v(r,e+1),n)&&(r.splice(e%r.length,1),t++);return t},removeDuplicatePoints:function(r,n){for(var t=r.length-1;t>=1;--t)for(var e=r[t],u=t-1;u>=0;--u)D(e,r[u],n)&&r.splice(t,1)},makeCCW:function(r){for(var n=0,t=r,e=1;e<r.length;++e)(t[e][1]<t[n][1]||t[e][1]===t[n][1]&&t[e][0]>t[n][0])&&(n=e);return!u(v(r,n-1),v(r,n),v(r,n+1))&&(function(r){for(var n=[],t=r.length,e=0;e!==t;e++)n.push(r.pop());for(e=0;e!==t;e++)r[e]=n[e]}(r),!0)}};function n(r,n,t){t=t||0;var e,u,f,o,i,h,a,l=[0,0];return e=r[1][1]-r[0][1],u=r[0][0]-r[1][0],f=e*r[0][0]+u*r[0][1],o=n[1][1]-n[0][1],i=n[0][0]-n[1][0],h=o*n[0][0]+i*n[0][1],q(a=e*i-o*u,0,t)||(l[0]=(i*f-u*h)/a,l[1]=(e*h-o*f)/a),l}function t(r,n,t,e){var u=n[0]-r[0],f=n[1]-r[1],o=e[0]-t[0],i=e[1]-t[1];if(o*f-i*u==0)return!1;var h=(u*(t[1]-r[1])+f*(r[0]-t[0]))/(o*f-i*u),a=(o*(r[1]-t[1])+i*(t[0]-r[0]))/(i*u-o*f);return h>=0&&h<=1&&a>=0&&a<=1}function e(r,n,t){return(n[0]-r[0])*(t[1]-r[1])-(t[0]-r[0])*(n[1]-r[1])}function u(r,n,t){return e(r,n,t)>0}function f(r,n,t){return e(r,n,t)>=0}function o(r,n,t){return e(r,n,t)<0}function i(r,n,t){return e(r,n,t)<=0}var h=[],a=[];function l(r,n,t,u){if(u){var f=h,o=a;f[0]=n[0]-r[0],f[1]=n[1]-r[1],o[0]=t[0]-n[0],o[1]=t[1]-n[1];var i=f[0]*o[0]+f[1]*o[1],l=Math.sqrt(f[0]*f[0]+f[1]*f[1]),c=Math.sqrt(o[0]*o[0]+o[1]*o[1]);return Math.acos(i/(l*c))<u}return 0===e(r,n,t)}function c(r,n){var t=n[0]-r[0],e=n[1]-r[1];return t*t+e*e}function v(r,n){var t=r.length;return r[n<0?n%t+t:n%t]}function g(r,n,t,e){for(var u=t;u<e;u++)r.push(n[u])}function s(r,n){return o(v(r,n-1),v(r,n),v(r,n+1))}var p=[],m=[];function A(r,t,e){var u,o,h=p,a=m;if(f(v(r,t+1),v(r,t),v(r,e))&&i(v(r,t-1),v(r,t),v(r,e)))return!1;o=c(v(r,t),v(r,e));for(var l=0;l!==r.length;++l)if((l+1)%r.length!==t&&l!==t&&f(v(r,t),v(r,e),v(r,l+1))&&i(v(r,t),v(r,e),v(r,l))&&(h[0]=v(r,t),h[1]=v(r,e),a[0]=v(r,l),a[1]=v(r,l+1),u=n(h,a),c(v(r,t),u)<o))return!1;return!0}function d(r,n,e){for(var u=0;u!==r.length;++u)if(u!==n&&u!==e&&(u+1)%r.length!==n&&(u+1)%r.length!==e&&t(v(r,n),v(r,e),v(r,u),v(r,u+1)))return!1;return!0}function M(r,n,t,e){var u=e||[];if(function(r){r.length=0}(u),n<t)for(var f=n;f<=t;f++)u.push(r[f]);else{for(f=0;f<=t;f++)u.push(r[f]);for(f=n;f<r.length;f++)u.push(r[f])}return u}function k(r){for(var n=[],t=[],e=[],u=[],f=Number.MAX_VALUE,o=0;o<r.length;++o)if(s(r,o))for(var i=0;i<r.length;++i)if(A(r,o,i)){t=k(M(r,o,i,u)),e=k(M(r,i,o,u));for(var h=0;h<e.length;h++)t.push(e[h]);t.length<f&&(n=t,f=t.length,n.push([v(r,o),v(r,i)]))}return n}function C(r,n){if(0===n.length)return[r];if(n instanceof Array&&n.length&&n[0]instanceof Array&&2===n[0].length&&n[0][0]instanceof Array){for(var t=[r],e=0;e<n.length;e++)for(var u=n[e],f=0;f<t.length;f++){var o=C(t[f],u);if(o){t.splice(f,1),t.push(o[0],o[1]);break}}return t}u=n,e=r.indexOf(u[0]),f=r.indexOf(u[1]);return-1!==e&&-1!==f&&[M(r,e,f),M(r,f,e)]}function b(r,n,t,e,u){u=u||0;var f=n[1]-r[1],o=r[0]-n[0],i=f*r[0]+o*r[1],h=e[1]-t[1],a=t[0]-e[0],l=h*t[0]+a*t[1],c=f*a-h*o;return q(c,0,u)?[0,0]:[(a*i-o*l)/c,(f*l-h*i)/c]}function q(r,n,t){return t=t||0,Math.abs(r-n)<=t}function D(r,n,t){return q(r[0],n[0],t)&&q(r[1],n[1],t)}var x=r.decomp,P=r.isSimple,y=r.makeCCW,E=r.quickDecomp,L=r.removeCollinearPoints,N=r.removeDuplicatePoints;export{x as decomp,r as default,P as isSimple,y as makeCCW,E as quickDecomp,L as removeCollinearPoints,N as removeDuplicatePoints};